---
slug: /atlas-search/introduction
title: Atlas Search Introduction
description: When using the WordPress Search API through WPGraphQL or REST results can yield poor relevancy, has zero query configuration available, and supports only basic WordPress data types out of the box. Atlas Search aims to improve the search relevancy, querying-options, & increase supported data types within your content data search.
---
## Atlas Search (Beta)
  
You have an [Atlas "headless" WordPress site](https://wpengine.com/atlas/) using the WordPress (WP) search APIs (either the inbuilt REST ones or the [WP-GraphQL](https://www.wpgraphql.com/) one, via its plugin - We will focus on just the latter right now). You soon find that your content data search has some issues:
* Patchy relevancy.
* Search terms with spaces work as `AND` but no `OR` or `NOT` functionality.
* Has issues with advanced WordPress data types:
    + Requires another plugin for ACF (Advanced Custom Fields) types
    + Doesn’t support ACM (Atlas Content Modeler) types

Our new `Atlas Search` product is designed to help here: It aims to improve the search relevancy, querying-options, & increase supported data types within your content data search. Atlas Search consists of 2 parts: A SaaS `Atlas Search server` & a per-client `Atlas Search plugin`.
  
  

### Contents
* [Getting an Atlas Search Account](#getting-an-atlas-search-account) - How to register for an account & get a 'namespace'.
* [Installing the Atlas Search Plugin](#installing-the-atlas-search-plugin) - Methods of installing the Atlas Search plugin.
    + [Installation via Blueprints](#installation-via-blueprints) - Standard approach to the plugin installation.
    + [Installation without Blueprints](#installation-without-blueprints) - Alternate, discouraged, approach to the plugin installation.
* [Configuring the Atlas Search Plugin](#configuring-atlas-search-plugin) - Making the Atlas Search plugin talk to the Atlas Search server.
* [Content Data Sync](#content-data-sync) - How to clone/ sync WordPress data into Atlas Search
* [Using Atlas Search](#using-atlas-search) - A series of sample GraphQL queries that demonstrate Atlas Search’s functionalities.
    + [Querying Standard WP Data Types](#querying-standard-wp-data-types-) WP Data Types - Queries with Posts, Pages, CPT
    + [Querying ACM/ ACF Types](#querying-acm-or-acf-types-) - Queries for Atlas Content Modeller or Advanced Custom Fields
    + [Getting More Specific with Queries](#getting-more-specific-with-queries) - Queries with `AND`, `NOT` & `OR`
* [Advanced Configuration of Atlas Search](#advanced-configuration-of-atlas-search) - Configure what WP Data Types & fields are searchable, & set custom weightings to prioritize what matters to you.
  
  

### Getting an Atlas Search Account
The Atlas Search server is where all your Content Data will live, under your own personal 'namespace', once you have created an Atlas Search account. To get this account you will need to fill in the [enrolment form](https://docs.google.com/forms/d/e/1FAIpQLSeRdfLXHlAhjaBfMJOobynCwxuKFtWwzHzna_yRXFt0n_dbhA/viewform) - which will also provision a namespace for you. Please note that this is limited to 1 account/ namespace per email. If you have already filled in the aforementioned form, & received the associated 'setup' email, then please ignore this step. 
After submission of the form you should receive an Atlas Search 'setup' email with the your own personal namespace's URL & Access Token. **Do not share this setup email or the Atlas Search credentials**

Once you have a namespace you will want to be able to communicate between your headless WP instance & the Atlas Search server - this is achieved by using the Atlas Search plugin.
  

### Installing the Atlas Search Plugin
The Atlas Search plugin can be installed manually but will more likely be installed implicitly as part of our Atlas Blueprints setup.
  
#### Installation via Blueprints
**This is the standard path for Atlas Search plugin installation**
The Atlas Blueprints pipeline will have:
* Installed & activated the [WP-GraphQL](https://wordpress.org/plugins/wp-graphql/) plugin.
* Installed & activated the [Atlas Search](https://wordpress.org/plugins/atlas-search/) plugin.
  
#### Installation without Blueprints
**This section only applies if you did not acquire the Atlas Search plugin via Atlas Blueprints.**
To install the Atlas Search plugin you will need to have an instance of WordPress 'site' on WPEngine ‘Portal’, with a target ‘environment’ that you can access the ‘WP Admin’ panel for. In this WP Admin panel, before installing the Atlas Search plugin, you will need to download & activate the [WP-GraphQL](https://wordpress.org/plugins/wp-graphql/) plugin from the WordPress.org plugin repository. The Atlas Search plugin can then be installed & activated [as per its documentation](https://wordpress.org/plugins/atlas-search/#installation).
  
  
### Configuring Atlas Search Plugin
Configuring the Atlas Search plugin enables both the Content Data Sync (indexes to the Atlas Search server) & Search Querying (filtered reads from the Atlas Search server, via GraphQL) functionalities.

After successful installation, via one of the methods discussed in the [Plugin Installation section](#installing-the-atlas-search-plugin), the `Atlas Search` menu item will appear in the left navigation panel of the site environment’s WP Admin panel.
1. Click this `Atlas Search` menu item. By default it will bring you to the default sub-menu ‘Settings’ view, where you will populate the following inputs with the values from the setup email you have received after completing the [Getting an Account section](#getting-an-atlas-search-account):
    + (Namespace) URL (ie. `https://{atlas-env}/sync/{yoursite}/graphql`)
    + Access Token (ie. `{your-unique-access-token}`)
2. Select the ‘Save Settings’ button for the changes to take effect.

![Atlas Search Plugin Settings](./images/as-plugin-settings.png)
  
  

### Content Data Sync
Once you have configured the Atlas Search plugin you will need to run an initial sync, so that Atlas Search server has an indexed copy of your content data to search, on your Atlas-site. After this initial sync the Atlas Search plugin, while “activate”, will be able to update your content data in real-time whenever you add new items. If, at some point after that first successful Content Data Sync, you choose to “deactivate” the Atlas Search plugin, then add new data, you will need to re-run this Content Data Sync to catch the untracked data.

Initiating the Content Data Sync is done via the plugin’s UI, as follows:
1. Click this ‘Atlas Search’ menu item, then click the ‘Sync’ sub-menu item to bring up the below view.
2. Click the ‘Synchronize Now’ button. This Data Sync completion can take some time with large data sets. The Sync Data loading bar will tell you what is currently being Sync’d so you can see where you are in the process.
3. Await the ‘Sync Completed Successfully’ status message.
4. In the event that the sync process does not complete you will get an error message of ‘Unexpected sync error occurred. Please try to Resume the sync or Delete what did sync, then start the sync process again’ -  at which point a Resume & Delete button will be available for retrying or purging & restarting the Data Sync.

![Atlas Search Plugin Data Sync](./images/as-plugin-data-sync.png)

After the Content Data Sync has completed you are free to query the content data, via WPGraphQL! It will look just like the GraphQL search did before but behind the scenes the WordPress Search will now delegate Search activities to Atlas Search instead.
  
  

### Using Atlas Search
Once the Content Data Sync has completed, & while the Atlas Search plugin is “active” on your environment’s WP Admin panel, you can use Atlas Search to enhance your search experience.

The WP-GraphQL plugin is where you can test this search functionality most easily. That plugin includes an instance of the ‘GraphiQL’ IDE, where one can interface in the browser with their WordPress data, via GraphQL queries. Atlas Search overrides the default search functionality for WPGraphQL queries on all Atlas Search supported WP data types, but all other queries & data in GraphQL/ GraphiQL will still work as before.

Below is a screenshot of WP-GraphQL plugin & GraphiQL view, where Atlas Search has replaced the default WP search behavior, followed by some sample queries:

![Atlas Search Plugin Data Sync](./images/as-wpgraphiql.png)
  

#### Querying Standard WP Data Types:
For querying standard WordPress data types (Posts, Pages & Custom Post Types (CPT)) some examples with Atlas Search are:

* Querying Posts/ Pages:
```
{
  {either ‘posts’ or ‘pages’}(where: {search: "CSS"}) {
    nodes {
      id
      status
      title
    }
  }
}
```
* Querying CPTs:
```
{
  branches(where: {search: "Austin"}) {
    nodes {
      address
    }
  }
}
```
  

#### Querying ACM or ACF Types:
Atlas Search also integrates with the [Atlas Content Modeler](https://developers.wpengine.com/blog/what-is-atlas-content-modeler) (ACM) & [Advanced Custom Fields](https://wordpress.org/plugins/advanced-custom-fields/) (ACF). Default WP search requires plugins for ACF & doesn’t support ACM at all.

* Querying ACM type of `project`, with fields of  `streetAddress`, `contactName` & `workOrderNumber`:
```
{
  projects(where: {search: "Austin"}) {
    nodes {
      streetAddress
      contactName
      workOrderNumber
    }
  }
}
```
  

#### Getting More Specific with Queries:
Atlas Search treats spaces as ‘OR’ by default, whereas the default WordPress search treats spaces as `AND`. With Atlas Search, however, you can explicitly specify the `AND`, `OR` & `NOT` keywords within your search query & you can combine them too - this provides enhanced specificity for your querying needs:

* Using `NOT` search operator:
```
{
  projects(where: {search: "Austin NOT Minnesota"}) {
    nodes {
      streetAddress
      contactName
      workOrderNumber
    }
  }
}
```

* Using `AND` search operator:
```
{
  projects(where: {search: "New York AND Texas"}) {
    nodes {
      streetAddress
      contactName
      workOrderNumber
    }
  }
}
```

* Using `OR` search operator:
```
{
  projects(where: {search: "New York OR Texas"}) {
    nodes {
      streetAddress
      contactName
      workOrderNumber
    }
  }
}
```  
  

### Advanced Configuration of Atlas Search
Atlas Search, by default, will search all supported WP Data Type objects (Posts, Pages, CPTs, ACMs, etc.) by all of their supported fields (string, number, boolean, other WP Data Type objects).

Atlas Search will then return results where each field-match to the search query term(s) are given an equal weighting (1), thus the objects with most search-match occurrences should rise to the top. This may not always be the desired behavior, so it provides both a field-level filter (‘searchable’ field toggle), & a field-level weighting slider (boost weighting of any more-important fields from 2 to 200).

The Plugin menu’s ‘Search Config Settings’ option, which lists all available WordPress data types & their fields. In here you can play with the specifics, but be sure to press ‘Save’ to see your changes reflected.

![Atlas Search Plugin Config](./images/as-plugin-config.png)
